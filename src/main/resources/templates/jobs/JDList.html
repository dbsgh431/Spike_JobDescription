<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>마이잡디</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
</head>
<body>
<div th:insert="~{layouts/header :: header}"></div>

<table class="table table-bordered table-condensed">
    <thead>
    <tr>
        <th scope="col">번호</th>
        <th scope="col">회사명</th>
        <th scope="col">직무</th>
        <th scope="col">마감 기간</th>
        <th scope="col">지원 여부</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="job : ${jobsPages}">
        <th scope="row" th:text="${jobStat.count}">index</th>
        <td><a th:href="@{|/jobs/edit/${job.id}|}" th:text="${job.companyName}">회사명</a></td>
        <td th:text="${job.position}">직무</td>
        <td th:text="${job.period} ? ${job.period} : '수시 채용'">마감 기간</td>
        <td th:text="${job.isApply} ? '지원 완료' : '' ">지원 여부</td>
    </tr>
    </tbody>
</table>
<div class="d-grid gap-2 d-md-flex justify-content-md-end">

    <a class="btn btn-primary" href="/jobs/add" role="button">목록 추가</a>
</div>
<div class="col text-center">
    <!-- 첫번째 페이지로 이동 -->
    <a th:href="@{/jobs(page=1)}">첫 페이지 </a>

    <span th:each="page: ${#numbers.sequence(startPage, endPage)}">

    <!-- 현재페이지는 링크 없이 숫자만 -->
        <span th:if="${page == jobsPages.number + 1}" th:text="${page}"></span>
        <!-- 현재페이지 링크 X, 다른 페이지번호에는 링크를 보여준다 -->
        <span th:unless="${page == jobsPages.number + 1 or page == 0}">

             <a th:href="@{/jobs(page=${page})}" th:text="${page}"></a>
        </span>
    </span>


    <!-- 마지막 페이지로 이동 -->
    <span th:unless="${jobsPages.totalPages == 0}">
        <a th:href="@{/jobs(page=${jobsPages.totalPages})}"> 마지막 페이지</a>
    </span>

    <div th:insert="~{layouts/footer :: footer}"></div>
</div>
</body>
</html>